@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light theme - чистый минималистичный */
    --background: 0 0% 99%;
    --foreground: 240 10% 10%;
    --card: 0 0% 100%;
    --card-foreground: 240 10% 10%;
    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 10%;
    --primary: 220 90% 56%;
    --primary-foreground: 0 0% 100%;
    --secondary: 220 14% 96%;
    --secondary-foreground: 240 10% 10%;
    --muted: 220 14% 95%;
    --muted-foreground: 220 9% 46%;
    --accent: 280 85% 60%;
    --accent-foreground: 0 0% 100%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    --border: 220 13% 90%;
    --input: 220 13% 90%;
    --ring: 220 90% 56%;
    --radius: 0.75rem;
    
    /* Gradient colors */
    --gradient-start: 220 90% 56%;
    --gradient-end: 280 85% 60%;
  }

  /* Dark theme - глубокий с неоновыми акцентами */
  .dark {
    --background: 240 10% 6%;
    --foreground: 0 0% 95%;
    --card: 240 10% 8%;
    --card-foreground: 0 0% 95%;
    --popover: 240 10% 8%;
    --popover-foreground: 0 0% 95%;
    --primary: 175 85% 50%;
    --primary-foreground: 240 10% 4%;
    --secondary: 240 10% 12%;
    --secondary-foreground: 0 0% 95%;
    --muted: 240 10% 14%;
    --muted-foreground: 240 5% 55%;
    --accent: 280 85% 65%;
    --accent-foreground: 0 0% 100%;
    --destructive: 0 70% 50%;
    --destructive-foreground: 0 0% 100%;
    --border: 240 10% 16%;
    --input: 240 10% 16%;
    --ring: 175 85% 50%;
    
    /* Gradient colors */
    --gradient-start: 175 85% 50%;
    --gradient-end: 280 85% 65%;
  }

  /* Mono theme - элегантная чёрно-белая */
  .mono {
    --background: 0 0% 4%;
    --foreground: 0 0% 92%;
    --card: 0 0% 7%;
    --card-foreground: 0 0% 92%;
    --popover: 0 0% 7%;
    --popover-foreground: 0 0% 92%;
    --primary: 0 0% 92%;
    --primary-foreground: 0 0% 4%;
    --secondary: 0 0% 12%;
    --secondary-foreground: 0 0% 92%;
    --muted: 0 0% 14%;
    --muted-foreground: 0 0% 50%;
    --accent: 0 0% 30%;
    --accent-foreground: 0 0% 92%;
    --destructive: 0 0% 50%;
    --destructive-foreground: 0 0% 92%;
    --border: 0 0% 16%;
    --input: 0 0% 16%;
    --ring: 0 0% 92%;
    
    /* Gradient colors */
    --gradient-start: 0 0% 92%;
    --gradient-end: 0 0% 70%;
  }

  /* Avocado theme - свежая и сочная */
  .avocado {
    --background: 80 40% 96%;
    --foreground: 80 50% 10%;
    --card: 80 45% 99%;
    --card-foreground: 80 50% 10%;
    --popover: 80 45% 99%;
    --popover-foreground: 80 50% 10%;
    --primary: 145 60% 40%;
    --primary-foreground: 80 45% 99%;
    --secondary: 80 30% 92%;
    --secondary-foreground: 80 50% 10%;
    --muted: 80 25% 90%;
    --muted-foreground: 80 20% 35%;
    --accent: 30 80% 50%;
    --accent-foreground: 80 45% 99%;
    --destructive: 0 65% 50%;
    --destructive-foreground: 80 45% 99%;
    --border: 80 25% 85%;
    --input: 80 25% 85%;
    --ring: 145 60% 40%;
    
    /* Gradient colors */
    --gradient-start: 145 60% 40%;
    --gradient-end: 30 80% 50%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  html {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    scroll-padding-top: 5rem;
    /* Убираем scroll-behavior: smooth чтобы не конфликтовать с Lenis */
  }
  
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
    overflow-x: hidden;
    /* Предотвращаем случайные скроллы */
    overscroll-behavior: none;
  }

  /* Плавные переходы только для цветов - без transform */
  *, *::before, *::after {
    transition-property: background-color, border-color, color, fill, stroke, opacity;
    transition-duration: 0.15s;
    transition-timing-function: ease-out;
  }

  /* Скроллбар */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-muted-foreground/20 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-muted-foreground/30;
  }

  ::selection {
    background: hsl(var(--primary) / 0.2);
  }
}

/* Animations */
@keyframes gradient-shift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px hsl(var(--primary) / 0.3); }
  50% { box-shadow: 0 0 40px hsl(var(--primary) / 0.5); }
}

@layer components {
  /* Glass card */
  .glass-card {
    @apply rounded-2xl backdrop-blur-xl;
    background: hsl(var(--card) / 0.8);
    border: 1px solid hsl(var(--border) / 0.5);
  }

  .glass-card-hover {
    @apply glass-card;
    transition: all 0.3s ease;
  }

  .glass-card-hover:hover {
    background: hsl(var(--card) / 0.95);
    border-color: hsl(var(--border));
    transform: translateY(-2px);
  }

  /* Gradient text - адаптируется под тему */
  .gradient-text {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(
      135deg, 
      hsl(var(--gradient-start)), 
      hsl(var(--gradient-end))
    );
  }

  /* Dot pattern */
  .dot-pattern {
    background-image: radial-gradient(circle, hsl(var(--foreground) / 0.06) 1px, transparent 1px);
    background-size: 20px 20px;
  }

  /* Progress bar */
  .progress-bar {
    @apply h-1.5 rounded-full overflow-hidden;
    background: hsl(var(--muted));
  }

  .progress-bar-fill {
    @apply h-full rounded-full;
    background: linear-gradient(90deg, hsl(var(--gradient-start)), hsl(var(--gradient-end)));
  }

  /* Syntax highlighting */
  .syntax-keyword { color: hsl(var(--accent)); }
  .syntax-string { color: hsl(145 60% 45%); }
  .syntax-number { color: hsl(var(--primary)); }
  .syntax-comment { @apply italic; color: hsl(var(--muted-foreground)); }
  .syntax-function { color: hsl(40 80% 50%); }

  /* Typing trainer */
  .typing-char {
    @apply inline-block;
    transition: color 0.1s ease;
  }
  
  .typing-char.correct {
    color: hsl(145 70% 45%);
  }
  
  .typing-char.incorrect {
    color: hsl(0 70% 50%);
    background: hsl(0 70% 50% / 0.15);
    border-radius: 2px;
  }
  
  .typing-char.current {
    border-bottom: 2px solid hsl(var(--primary));
    animation: blink 1s ease-in-out infinite;
  }
  
  @keyframes blink {
    0%, 50% { border-color: hsl(var(--primary)); }
    51%, 100% { border-color: transparent; }
  }

  /* Button shimmer effect */
  .btn-shimmer {
    position: relative;
    overflow: hidden;
  }
  
  .btn-shimmer::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      hsl(0 0% 100% / 0.2),
      transparent
    );
    transform: translateX(-100%);
  }
  
  .btn-shimmer:hover::after {
    animation: shimmer 0.6s ease-out;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .mask-gradient-b {
    mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
  }

  .focus-ring {
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
    --tw-ring-color: hsl(var(--primary) / 0.5);
    --tw-ring-offset-color: hsl(var(--background));
  }
}

/* Responsive typography */
@media (max-width: 640px) {
  html {
    font-size: 14px;
  }
}

@media (min-width: 1536px) {
  html {
    font-size: 18px;
  }
}
